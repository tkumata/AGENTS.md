# AGENTS.md

コーディングエージェントが暴走しないよう AGENTS.md を用意する必要がありますが、二重管理しないように本リポジトリで管理します。

皆様の自慢の AGENTS.md / GEMINI.md / CLAUDE.md などありましたらご紹介いただけると幸いです。

## 方針

基本的に以下のような方針に分けて記述します。

- 基本方針
- 制限事項
- フェーズ別特例
- 新規開発方針
- 保守・修正方針

## 使い方

```shell
# setup for codex
ln -sf "$(pwd)/AGENTS.md" "$HOME/.codex/AGENTS.md"

# setup for claude
ln -sf "$(pwd)/AGENTS.md" "$HOME/.claude/CLAUDE.md"

# setup for gemini
ln -sf "$(pwd)/AGENTS.md" "$HOME/.gemini/GEMINI.md"
```

## 解説

なぜ、AGENTS.md のような指示をしているか解説します。

### 1. 基本方針

日本語で応答してほしいので、コーディングエージェントに日本語で応答するように指示します。

### 2. 制限事項

Electron 系エディタではフォントレンダリングが、monospace 指定であっても、英数字と日本語の文字幅比率が 2:3 になるため、テーブル表記やブロック内で日本語を使うと崩れます。そのため、日本語を使用してはならないよう指示します。また、具体的にどのような文字を利用するのかを明記します。

データの損失を防ぐため、git コマンドを実行してはならないよう指示します。特に GEMINI CLI は、git コマンドを実行しがちなので制限させます。

### 3. 新規開発方針

意図しないコードを生成しないように、コーディングエージェントの行動を制限していきます。

- 意図しないコードを生成しないように、いきなりコーディングしないことを指示しています。
- 下記観点から、要件定義書や仕様書や設計書を先に作成するよう指示しています。
  - 後日、人間がコードの内容を確認できること
  - コードがどこまで生成されているか確認できること
  - エージェントがコード生成中に迷子にならないように
  - docs ディレクトリに置くのは、プロジェクトルート汚さないため
  - ドキュメントファイルが大文字なのは、重要なドキュメントとして目立たせるため
- 新規開発中、エージェントとやりとりする度にドキュメントが新規作成されるとファイルが多くなったり、上書きされることを避けるために、追記することを指示しています。
- 未定義・不明点があれば明確にすることを指示しています。
  - 中学生基準は **「抽象論禁止」「専門用語禁止」** の実質指定で、エージェントが具体性のある質問をするように促します。

### 4. 保守・修正方針

新規開発のように大仰にならないように、保守・修正における方針を記述します。

- 即実装を許可
- ドキュメントの新規作成は不要
- 原則、既存コードと既存ドキュメントを正とする
- 未定義・不明点があれば最小限の仮定を明示してよい

新規開発フェーズと保守・修正フェーズで、コーディングエージェントの挙動を変えるために「フェーズ別特例」を設けています。ユーザがどちらのフェーズでコーディングエージェントを呼び出すかによって、適用される方針が変わります。

## 採点

- GEMINI 3 Pro による採点 98/100 点
- ChatGPT による採点 97/100 点
